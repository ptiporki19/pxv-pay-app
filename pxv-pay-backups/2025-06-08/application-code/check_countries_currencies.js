const { createClient } = require("@supabase/supabase-js"); const supabase = createClient(process.env.NEXT_PUBLIC_SUPABASE_URL, process.env.SUPABASE_SERVICE_ROLE_KEY); async function checkData() { console.log("ðŸ” Checking current countries and currencies..."); const { data: countries } = await supabase.from("countries").select("*", { count: "exact" }); const { data: currencies } = await supabase.from("currencies").select("*", { count: "exact" }); console.log("Total countries:", countries?.length || 0); console.log("Total currencies:", currencies?.length || 0); const { data: gabon } = await supabase.from("countries").select("*").eq("code", "GA"); console.log("Gabon found:", gabon?.length > 0 ? "Yes" : "No"); const { data: samples } = await supabase.from("countries").select("name, code, currency_code").limit(10); console.log("Sample countries with currencies:"); samples?.forEach(c => console.log(" -", c.name, "(" + c.code + "):", c.currency_code || "NO CURRENCY")); const { data: noCurrency } = await supabase.from("countries").select("name, code, currency_code").is("currency_code", null); console.log("Countries without currency_code:", noCurrency?.length || 0); if (noCurrency?.length > 0) { noCurrency.slice(0, 5).forEach(c => console.log(" -", c.name, "(" + c.code + ")")); if (noCurrency.length > 5) console.log(" - ... and", noCurrency.length - 5, "more"); } } checkData().catch(console.error);
